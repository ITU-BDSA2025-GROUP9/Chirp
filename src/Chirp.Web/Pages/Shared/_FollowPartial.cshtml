@using Chirp.Core
@using Chirp.Infrastructure.Service
@inject SignInManager<Author> SignInManager
@model FollowButtonViewModel

@if (SignInManager.IsSignedIn(User) && Model.Author != User.Identity!.Name)
{
    if (Model.IsFollowing)
    {
        <form method="post" asp-page-handler="Unfollow">
            <input type="hidden" name="author" value="@Model.Author" />
            <button class="followbtn" type="submit">Unfollow</button>
        </form>
    }
    else
    {
        <form method="post" asp-page-handler="Follow">
            <input type="hidden" name="author" value="@Model.Author" />
            <button class="followbtn" type="submit">Follow</button>
        </form>
    }
}
else if (Model.Author == User.Identity!.Name)
{ 
    <form class="delete-form" method="post" asp-page-handler="DeleteCheep"
          onsubmit="return confirm('Are you sure you want to delete this cheep?');">
        <input type="hidden" name="id" value="@Model.CheepId"/>
        <button class="deletebtn" type="submit">Delete</button>
    </form>
}